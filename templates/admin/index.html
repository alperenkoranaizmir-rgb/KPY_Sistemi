{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrahead %}
    {{ block.super }}
    <script src="{% static 'admin/js/jquery.init.js' %}"></script>
    <script src="{% static 'jazzmin/js/change_list.js' %}"></script>
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3 col-6">
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3>{% if projects_count %}{{ projects_count }}{% else %}0{% endif %}</h3>
                        <p>Toplam Proje</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-building"></i>
                    </div>
                    {# projects_proje_changelist artik projects/admin.py sayesinde dogru calismali #}
                    <a href="{% url 'admin:projects_proje_changelist' %}" class="small-box-footer">
                        Tüm Projeler <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-6">
                <div class="small-box bg-success">
                    <div class="inner">
                        <h3>{% if malik_count %}{{ malik_count }}{% else %}0{% endif %}</h3>
                        <p>Toplam Malik</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <a href="{% url 'admin:projects_malik_changelist' %}" class="small-box-footer">
                        Tüm Malikler <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-6">
                <div class="small-box bg-warning">
                    <div class="inner">
                        <h3>{% if butce_count %}{{ butce_count }}{% else %}0{% endif %}</h3>
                        <p>Toplam Bütçe Kaydı</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-money-bill-wave"></i>
                    </div>
                    {# finance_butce_changelist dogru kullanilmistir #}
                    <a href="{% url 'admin:finance_butce_changelist' %}" class="small-box-footer"> 
                        Tüm Bütçe Kayıtları <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-3 col-6">
                <div class="small-box bg-danger">
                    <div class="inner">
                        <h3>{% if user_count %}{{ user_count }}{% else %}0{% endif %}</h3>
                        <p>Sistem Kullanıcısı</p>
                    </div>
                    <div class="icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <a href="{% url 'admin:users_kullanici_changelist' %}" class="small-box-footer">
                        Tüm Kullanıcılar <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-tachometer-alt"></i> Özel Raporlar ve Analizler
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <a href="{% url 'projects:ilerleme_hunisi_raporu' %}" class="btn btn-app">
                                    <i class="fas fa-chart-bar"></i> Proje İlerleme Hunisi
                                </a>
                            </div>
                            <div class="col-md-3">
                                <a href="{% url 'projects:direnc_analizi_raporu' %}" class="btn btn-app">
                                    <i class="fas fa-balance-scale"></i> Malik Direnç Analizi
                                </a>
                            </div>
                            <div class="col-md-3">
                                <a href="{% url 'finance:butce_vs_fiili_raporu' %}" class="btn btn-app">
                                    <i class="fas fa-calculator"></i> Bütçe Yönetimi Raporu
                                </a>
                            </div>
                            <div class="col-md-3">
                                <a href="{% url 'admin:saha_tahliyetakibi_changelist' %}" class="btn btn-app">
                                    <i class="fas fa-house-damage"></i> Tahliye Takibi
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                {% if app_list %}
                    {% for app in app_list %}
                        <div class="card card-primary collapsed-card">
                            <div class="card-header">
                                <h3 class="card-title">
                                    <a href="{{ app.app_url }}" class="text-white">{{ app.name }}</a>
                                </h3>
                                <div class="card-tools">
                                    <button type="button" class="btn btn-tool" data-card-widget="collapse">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    {% for model in app.models %}
                                        <div class="col-md-4 mb-2">
                                            <div class="info-box shadow">
                                                <span class="info-box-icon bg-secondary">
                                                    <i class="fas fa-th-large"></i>
                                                </span>
                                                <div class="info-box-content">
                                                    <span class="info-box-text">
                                                        {{ model.name }}
                                                    </span>
                                                    <span class="info-box-number">
                                                        <a href="{{ model.add_url }}" class="badge badge-success">
                                                            {% translate 'Add' %}
                                                        </a>
                                                        <a href="{{ model.admin_url }}" class="badge badge-info">
                                                            {% translate 'View' %}
                                                        </a>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <p>{% translate "You don't have permission to view or edit anything." %}</p>
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}